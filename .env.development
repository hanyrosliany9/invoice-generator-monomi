# ===========================================
# LOCAL DEVELOPMENT ENVIRONMENT
# ===========================================
# This file is used when running the backend and frontend directly on your host machine
# (not in Docker)
#
# Copy this file to .env for local development:
#   cp .env.development .env
#
# Start infrastructure first:
#   docker compose -f docker-compose.development.yml up -d
#
# Then run dev servers:
#   cd backend && npm run start:dev
#   cd frontend && npm run dev

# ===========================================
# APPLICATION
# ===========================================
NODE_ENV=development
PORT=5000

# ===========================================
# DATABASE (PostgreSQL via Docker)
# ===========================================
# Connect to localhost on port 5438 (mapped from container 5432)
DATABASE_URL="postgresql://invoiceuser:devpassword@localhost:5438/invoices"

# Skip automatic database seeding (you'll run migrations/seed manually)
SKIP_DB_INIT=true

# ===========================================
# REDIS (via Docker)
# ===========================================
# Connect to localhost on port 6385 (mapped from container 6379)
REDIS_URL="redis://localhost:6385"

# ===========================================
# SECURITY
# ===========================================
# JWT secret for authentication tokens (change in production!)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this

# JWT expiration time
JWT_EXPIRES_IN=24h

# ===========================================
# FRONTEND
# ===========================================
# Frontend URL for CORS configuration
FRONTEND_URL=http://localhost:3000

# ===========================================
# EMAIL (SMTP)
# ===========================================
# Configure with your actual email service for development
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-app-password
FROM_EMAIL=noreply@monomi.finance
FROM_NAME=Invoice Generator System

# ===========================================
# INDONESIAN BUSINESS SETTINGS
# ===========================================
# Materai (stamp duty) threshold in IDR
MATERAI_THRESHOLD=5000000

# Default tax rate (PPN - Indonesian VAT)
DEFAULT_TAX_RATE=11

# ===========================================
# FILE STORAGE
# ===========================================
# Local storage paths (relative to backend root)
UPLOAD_PATH=./uploads
STORAGE_PATH=./storage

# Maximum file upload size in bytes (10MB)
MAX_FILE_SIZE=10485760

# ===========================================
# PUPPETEER (PDF Generation)
# ===========================================
# Auto-download Chromium on first npm install (~200MB)
# Don't skip the download - let Puppeteer manage it
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=false

# Puppeteer timeout for PDF generation (in milliseconds)
PUPPETEER_TIMEOUT=30000

# ===========================================
# CLOUDFLARE R2 STORAGE (Optional)
# ===========================================
# Leave empty for local development, or configure if needed
R2_ACCOUNT_ID=
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET_NAME=invoice-generator
R2_PUBLIC_URL=
R2_ENDPOINT=

# ===========================================
# RATE LIMITING
# ===========================================
# Requests per TTL window (dev is generous)
THROTTLE_TTL=60000
THROTTLE_LIMIT=1000

# ===========================================
# LOGGING
# ===========================================
# Log level: error, warn, log, debug, verbose
LOG_LEVEL=debug

# Enable request logging for debugging
ENABLE_REQUEST_LOGGING=true

# ===========================================
# FEATURE FLAGS
# ===========================================
# Enable features in development
ENABLE_METRICS=true
ENABLE_SWAGGER=true
ENABLE_AUDIT_LOG=true

# ===========================================
# PAYMENT GATEWAYS (Optional)
# ===========================================
MIDTRANS_SERVER_KEY=
MIDTRANS_CLIENT_KEY=
MIDTRANS_IS_PRODUCTION=false

# ===========================================
# DEVELOPMENT ONLY
# ===========================================
# Enable debug mode for development
DEBUG=false

# Disable authentication for testing (DANGEROUS - DEV ONLY)
DISABLE_AUTH=false
